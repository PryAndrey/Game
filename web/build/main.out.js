(()=>{"use strict";!function(){function i(){this.mem=2,this.Direction=0,this.pos=0}i.prototype.ChooseWays=function(){if(0==t[this.pos+1]||0==t[this.pos-1]||0==t[this.pos+19]||0==t[this.pos-19]||2==t[this.pos+1]||2==t[this.pos-1]||2==t[this.pos+19]||2==t[this.pos-19])for(;0==this.Direction;){var i=(s=1,o=4,s=Math.ceil(s),o=Math.floor(o),Math.floor(Math.random()*(o-s+1))+s);i<=2?1==i?1!=t[this.pos+1]&&4!=t[this.pos+1]&&(this.Direction=1):1!=t[this.pos-1]&&4!=t[this.pos-1]&&(this.Direction=-1):3==i?1!=t[this.pos+19]&&4!=t[this.pos+19]&&(this.Direction=19):1!=t[this.pos-19]&&4!=t[this.pos-19]&&(this.Direction=-19)}var s,o},i.prototype.UpdatePosition=function(){1!=t[this.pos+this.Direction]&&(0==this.mem&&(t[this.pos]=0),2==this.mem&&(t[this.pos]=2),0==t[this.pos+this.Direction]&&(this.mem=0),2==t[this.pos+this.Direction]&&(this.mem=2),t[this.pos+this.Direction]=4,this.pos=this.pos+this.Direction)}}();document.getElementById("canvas").getContext("2d"),new Image,new Image,new Image,new Image,new Image,new Image,new Image,new Image;var t=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,4,1,1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,0,1,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,1,2,2,2,1,0,1,0,0,0,0,0,0,0,1,0,1,2,2,2,1,1,1,1,0,1,0,1,1,0,1,1,0,1,0,1,1,1,1,0,0,0,0,0,0,0,1,4,4,4,1,0,0,0,0,0,0,0,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,2,2,2,1,0,1,0,0,0,4,0,0,0,1,0,1,2,2,2,1,1,1,1,0,1,0,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,0,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,1,0,1,0,1,1,1,1,1,0,1,0,1,0,1,1,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,1,1,1,1,1,1,0,1,0,1,1,1,1,1,1,0,1,1,4,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];new Array})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcm9qZWN0LXRlbXBsYXRlLy4vc3JjL21haW4udHMiXSwibmFtZXMiOlsibWVtIiwiRGlyZWN0aW9uIiwicG9zIiwiQ2hvb3NlV2F5cyIsImZpZWxkIiwidGhpcyIsIlIiLCJtaW4iLCJtYXgiLCJNYXRoIiwiY2VpbCIsImZsb29yIiwicmFuZG9tIiwiVXBkYXRlUG9zaXRpb24iLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0Q29udGV4dCIsIkltYWdlIiwiQXJyYXkiXSwibWFwcGluZ3MiOiJvQkFTQSx3QkFDQyxLQUFBQSxJQUFNLEVBQ04sS0FBQUMsVUFBWSxFQUNaLEtBQUFDLElBQU0sRUFFTixZQUFBQyxXQUFBLFdBQ0MsR0FBMEIsR0FBckJDLEVBQU1DLEtBQUtILElBQUksSUFBa0MsR0FBckJFLEVBQU1DLEtBQUtILElBQUksSUFBbUMsR0FBdEJFLEVBQU1DLEtBQUtILElBQUksS0FBb0MsR0FBdEJFLEVBQU1DLEtBQUtILElBQUksS0FDL0UsR0FBckJFLEVBQU1DLEtBQUtILElBQUksSUFBa0MsR0FBckJFLEVBQU1DLEtBQUtILElBQUksSUFBbUMsR0FBdEJFLEVBQU1DLEtBQUtILElBQUksS0FBb0MsR0FBdEJFLEVBQU1DLEtBQUtILElBQUksSUFDeEcsS0FBeUIsR0FBbEJHLEtBQUtKLFdBQWdCLENBQzNCLElBQUlLLEdBdU51QkMsRUF2TkcsRUF1TlVDLEVBdk5QLEVBd05wQ0QsRUFBTUUsS0FBS0MsS0FBS0gsR0FDaEJDLEVBQU1DLEtBQUtFLE1BQU1ILEdBQ1ZDLEtBQUtFLE1BQU1GLEtBQUtHLFVBQVlKLEVBQU1ELEVBQU0sSUFBTUEsR0F6TjlDRCxHQUFLLEVBQ0MsR0FBTEEsRUFDdUIsR0FBckJGLEVBQU1DLEtBQUtILElBQUksSUFBa0MsR0FBckJFLEVBQU1DLEtBQUtILElBQUksS0FBVUcsS0FBS0osVUFBWSxHQUVqRCxHQUFyQkcsRUFBTUMsS0FBS0gsSUFBSSxJQUFrQyxHQUFyQkUsRUFBTUMsS0FBS0gsSUFBSSxLQUFVRyxLQUFLSixXQUFhLEdBR3BFLEdBQUxLLEVBQ3dCLEdBQXRCRixFQUFNQyxLQUFLSCxJQUFJLEtBQW9DLEdBQXRCRSxFQUFNQyxLQUFLSCxJQUFJLE1BQVdHLEtBQUtKLFVBQVksSUFFbEQsR0FBdEJHLEVBQU1DLEtBQUtILElBQUksS0FBb0MsR0FBdEJFLEVBQU1DLEtBQUtILElBQUksTUFBV0csS0FBS0osV0FBYSxJQTRNcEYsSUFBK0JNLEVBQWFDLEdBck0zQyxZQUFBSyxlQUFBLFdBQ3VDLEdBQWxDVCxFQUFNQyxLQUFLSCxJQUFJRyxLQUFLSixhQUNQLEdBQVpJLEtBQUtMLE1BQ1JJLEVBQU1DLEtBQUtILEtBQU8sR0FDSCxHQUFaRyxLQUFLTCxNQUNSSSxFQUFNQyxLQUFLSCxLQUFPLEdBRW1CLEdBQWxDRSxFQUFNQyxLQUFLSCxJQUFJRyxLQUFLSixhQUN2QkksS0FBS0wsSUFBTSxHQUMwQixHQUFsQ0ksRUFBTUMsS0FBS0gsSUFBSUcsS0FBS0osYUFDdkJJLEtBQUtMLElBQU0sR0FDWkksRUFBTUMsS0FBS0gsSUFBSUcsS0FBS0osV0FBYSxFQUNqQ0ksS0FBS0gsSUFBTUcsS0FBS0gsSUFBTUcsS0FBS0osWUF2QzlCLEdBNENrQmEsU0FBU0MsZUFBZSxVQVdoQkMsV0FBVyxNQUV0QixJQUFJQyxNQUNYLElBQUlBLE1BQ0MsSUFBSUEsTUFDTCxJQUFJQSxNQUVULElBQUlBLE1BQ0QsSUFBSUEsTUFDTCxJQUFJQSxNQUNMLElBQUlBLE1BMUVaLElBbUZJYixFQUFPLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDN0MsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFDcEMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FFMUIsSUFBSWMsTyIsImZpbGUiOiJtYWluLm91dC5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCBQYWNtYW4gPSB7ICAgICAgIFxuXHRzY29yZTogMCwgICAgXG5cdERpcmVjdGlvbjoge1xuXHRcdE5vdzogMCxcblx0XHROZXh0OiAwLFxuXHR9LFxuXHRwb3M6IDAsXG59XG5cbmNsYXNzIGdob3N0IHtcblx0bWVtID0gMlxuXHREaXJlY3Rpb24gPSAwXHRcblx0cG9zID0gMFxuXHRcblx0Q2hvb3NlV2F5cygpe1xuXHRcdGlmICgoZmllbGRbdGhpcy5wb3MrMV0gPT0gMCkgfHwgKGZpZWxkW3RoaXMucG9zLTFdID09IDApIHx8IChmaWVsZFt0aGlzLnBvcysxOV0gPT0gMCkgfHwgKGZpZWxkW3RoaXMucG9zLTE5XSA9PSAwKSB8fCBcblx0XHQgICAgKGZpZWxkW3RoaXMucG9zKzFdID09IDIpIHx8IChmaWVsZFt0aGlzLnBvcy0xXSA9PSAyKSB8fCAoZmllbGRbdGhpcy5wb3MrMTldID09IDIpIHx8IChmaWVsZFt0aGlzLnBvcy0xOV0gPT0gMikpe1xuXHRcdFx0d2hpbGUgKHRoaXMuRGlyZWN0aW9uID09IDApIHtcblx0XHRcdFx0bGV0IFIgPSBnZXRSYW5kb21JbnRJbmNsdXNpdmUoMSwgNCk7XHRcblx0XHRcdFx0aWYgKFIgPD0gMil7XG5cdFx0XHRcdFx0aWYgKFIgPT0gMSl7XG5cdFx0XHRcdFx0XHRpZiAoKGZpZWxkW3RoaXMucG9zKzFdICE9IDEpICYmIChmaWVsZFt0aGlzLnBvcysxXSAhPSA0KSkgdGhpcy5EaXJlY3Rpb24gPSAxO1xuXHRcdFx0XHRcdH1lbHNle1x0XG5cdFx0XHRcdFx0XHRpZiAoKGZpZWxkW3RoaXMucG9zLTFdICE9IDEpICYmIChmaWVsZFt0aGlzLnBvcy0xXSAhPSA0KSkgdGhpcy5EaXJlY3Rpb24gPSAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdGlmIChSID09IDMpe1xuXHRcdFx0XHRcdFx0aWYgKChmaWVsZFt0aGlzLnBvcysxOV0gIT0gMSkgJiYgKGZpZWxkW3RoaXMucG9zKzE5XSAhPSA0KSkgdGhpcy5EaXJlY3Rpb24gPSAxOTtcblx0XHRcdFx0XHR9ZWxzZXsgXG5cdFx0XHRcdFx0XHRpZiAoKGZpZWxkW3RoaXMucG9zLTE5XSAhPSAxKSAmJiAoZmllbGRbdGhpcy5wb3MtMTldICE9IDQpKSB0aGlzLkRpcmVjdGlvbiA9IC0xOTtcblx0XHRcdFx0XHR9XHRcdFx0XHRcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cbiAgICB9XG5cdFxuXHRVcGRhdGVQb3NpdGlvbigpe1xuXHRcdGlmIChmaWVsZFt0aGlzLnBvcyt0aGlzLkRpcmVjdGlvbl0gIT0gMSl7XHRcdFx0XHRcblx0XHRcdGlmICh0aGlzLm1lbSA9PSAwKVxuXHRcdFx0XHRmaWVsZFt0aGlzLnBvc10gPSAwO1xuXHRcdFx0aWYgKHRoaXMubWVtID09IDIpXG5cdFx0XHRcdGZpZWxkW3RoaXMucG9zXSA9IDI7XG5cdFx0XHRcdFxuXHRcdFx0aWYgKGZpZWxkW3RoaXMucG9zK3RoaXMuRGlyZWN0aW9uXSA9PSAwKVxuXHRcdFx0XHR0aGlzLm1lbSA9IDA7XG5cdFx0XHRpZiAoZmllbGRbdGhpcy5wb3MrdGhpcy5EaXJlY3Rpb25dID09IDIpXG5cdFx0XHRcdHRoaXMubWVtID0gMjtcblx0XHRcdGZpZWxkW3RoaXMucG9zK3RoaXMuRGlyZWN0aW9uXSA9IDQ7XHRcblx0XHRcdHRoaXMucG9zID0gdGhpcy5wb3MgKyB0aGlzLkRpcmVjdGlvbjtcblx0XHRcdH1cdFx0XG4gICAgfVx0XG59XG5cbmxldCBjYW52YXM6IGFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuXG5mdW5jdGlvbiBfaW5pdENhbnZhcyhjYW52YXM6IGFueSkge1xuICAgIGNhbnZhcy53aWR0aCA9IEdBTUUud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IEdBTUUuaGVpZ2h0O1xufVxuXG5sZXQgR0FNRSA9IHtcbiAgICB3aWR0aDogNzYwLFxuICAgIGhlaWdodDogODQwLFxuICAgIGZwczogNDAwLFxuICAgIGNhbnZhc0NvbnRleHQ6IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksXHRcblx0c3ByaXRlczoge1xuICAgICAgICBHaG9zdDogbmV3IEltYWdlKCksXHRcdFxuXHRcdFdhbGw6IG5ldyBJbWFnZSgpLFxuXHRcdEVtcHR5Q2VsbDogbmV3IEltYWdlKCksXG5cdFx0Rm9vZENlbGw6IG5ldyBJbWFnZSgpLFxuXHRcdFxuXHRcdFRvcDogbmV3IEltYWdlKCksXG5cdFx0Qm90dG9tOiBuZXcgSW1hZ2UoKSxcblx0XHRSaWdodDogbmV3IEltYWdlKCksXG5cdFx0TGVmdDogbmV3IEltYWdlKCksXG4gICAgfVxufVxuIFxubGV0IENlbGwgPSB7XG4gICAgd2lkdGg6IEdBTUUud2lkdGggLyAxOSxcbiAgICBoZWlnaHQ6IEdBTUUuaGVpZ2h0IC8gMjEsXG59XG5cbmxldCBmaWVsZCA9WzEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsXG5cdFx0XHQxLDQsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsNCwxLFxuXHRcdFx0MSwwLDEsMSwwLDEsMSwxLDAsMSwwLDEsMSwxLDAsMSwxLDAsMSxcblx0XHRcdDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsXG5cdFx0XHQxLDAsMSwxLDAsMSwwLDEsMSwxLDEsMSwwLDEsMCwxLDEsMCwxLFxuXHRcdFx0MSwwLDAsMCwwLDEsMCwwLDAsMSwwLDAsMCwxLDAsMCwwLDAsMSxcblx0XHRcdDEsMSwxLDEsMCwxLDEsMSwwLDEsMCwxLDEsMSwwLDEsMSwxLDEsXG5cdFx0XHQyLDIsMiwxLDAsMSwwLDAsMCwwLDAsMCwwLDEsMCwxLDIsMiwyLFxuXHRcdFx0MSwxLDEsMSwwLDEsMCwxLDEsMCwxLDEsMCwxLDAsMSwxLDEsMSxcblx0XHRcdDAsMCwwLDAsMCwwLDAsMSw0LDQsNCwxLDAsMCwwLDAsMCwwLDAsXG5cdFx0XHQxLDEsMSwxLDAsMSwwLDEsMSwxLDEsMSwwLDEsMCwxLDEsMSwxLFxuXHRcdFx0MiwyLDIsMSwwLDEsMCwwLDAsNCwwLDAsMCwxLDAsMSwyLDIsMixcblx0XHRcdDEsMSwxLDEsMCwxLDAsMSwxLDEsMSwxLDAsMSwwLDEsMSwxLDEsXG5cdFx0XHQxLDAsMCwwLDAsMCwwLDAsMCwxLDAsMCwwLDAsMCwwLDAsMCwxLFxuXHRcdFx0MSwwLDEsMSwwLDEsMSwxLDAsMSwwLDEsMSwxLDAsMSwxLDAsMSxcblx0XHRcdDEsMCwwLDEsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDEsMCwwLDEsXG5cdFx0XHQxLDEsMCwxLDAsMSwwLDEsMSwxLDEsMSwwLDEsMCwxLDAsMSwxLFxuXHRcdFx0MSwwLDAsMCwwLDEsMCwwLDAsMSwwLDAsMCwxLDAsMCwwLDAsMSxcblx0XHRcdDEsMCwxLDEsMSwxLDEsMSwwLDEsMCwxLDEsMSwxLDEsMSwwLDEsXG5cdFx0XHQxLDQsMCwwLDAsMCwwLDAsMCwzLDAsMCwwLDAsMCwwLDAsNCwxLFxuXHRcdFx0MSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMSwxLDEsMV07XG5cbmxldCBHaG9zdHMgPSBuZXcgQXJyYXkoKTtcbmNvbnN0IEdob3N0Q291bnQgPSA2O1xubGV0IGxvc2UgPSBmYWxzZTtcbmxldFx0Rm9vZCA9IDA7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0XG4gICAgR0FNRS5zcHJpdGVzLlRvcC5zcmMgPSBcImltZy9QYWNtYW5ULnBuZ1wiXG5cdEdBTUUuc3ByaXRlcy5Cb3R0b20uc3JjID0gXCJpbWcvUGFjbWFuQi5wbmdcIlxuXHRHQU1FLnNwcml0ZXMuUmlnaHQuc3JjID0gXCJpbWcvUGFjbWFuUi5wbmdcIlxuXHRHQU1FLnNwcml0ZXMuTGVmdC5zcmMgPSBcImltZy9QYWNtYW5MLnBuZ1wiXHRcblx0R0FNRS5zcHJpdGVzLkdob3N0LnNyYyA9IFwiaW1nL0dob3N0LnBuZ1wiXG4gICAgR0FNRS5zcHJpdGVzLldhbGwuc3JjID0gXCJpbWcvV2FsbC5wbmdcIiBcblx0R0FNRS5zcHJpdGVzLkVtcHR5Q2VsbC5zcmMgPSBcImltZy9FbXB0eUNlbGwucG5nXCJcblx0R0FNRS5zcHJpdGVzLkZvb2RDZWxsLnNyYyA9IFwiaW1nL0Zvb2RDZWxsLnBuZ1wiXG5cdFxuXHRcbiAgICBfaW5pdENhbnZhcyhjYW52YXMpO1xuXHRcblx0Zm9yKGxldCBpID0gMDsgaSA8IEdob3N0Q291bnQ7IGkrKyl7XG5cdFx0R2hvc3RzW2ldID0gbmV3IGdob3N0KCk7XHRcdFxuXHR9XG5cdFxuXHRsZXQgQ291bnQgPSAwO1xuXHRmb3IobGV0IGkgPSAwOyBpIDwgMzk5OyBpKyspe1xuXHRcdGlmIChmaWVsZFtpXSA9PSA0KXsgXG5cdFx0XHRpZiAoQ291bnQgPCBHaG9zdENvdW50KXtHaG9zdHNbQ291bnRdLnBvcyA9IGk7fSBlbHNlIHtmaWVsZFtpXSA9IDB9XG5cdFx0XHRDb3VudCsrO1x0XHRcdFxuXHRcdH1cblx0XHRpZiAoZmllbGRbaV0gPT0gMyl7IC8vUGFjbWFuIDNcblx0XHRcdFBhY21hbi5wb3MgPSBpO1xuXHRcdH1cblx0fVxuXHRmb3IobGV0IGkgPSAwOyBpIDwgMzk5OyBpKyspIGlmKGZpZWxkW2ldID09IDApIEZvb2QrKztcblx0XG4gICAgc2V0SW50ZXJ2YWwoX3RpY2ssIEdBTUUuZnBzKTtcbn1cblxuZnVuY3Rpb24gX3RpY2soKSB7XG5cdHdpbmRvdy5vbmtleWRvd24gPSBwcm9jZXNzS2V5O1xuXHRVcGRhdGVTdGF0ZSgpO1xuXHRkcmF3KCk7XG5cdGlmIChsb3NlKSB7YWxlcnQoXCLQotGLINC/0YDQvtC40LPRgNCw0LshXCIpOyB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7IHNsZWVwKDIwMCk7fVxuICAgIGlmIChQYWNtYW4uc2NvcmUgPT0gRm9vZCkge2FsZXJ0KFwi0KLRiyDQv9C+0LHQtdC00LjQuyFcIik7IHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsgc2xlZXAoMjAwKTt9XHQgXG59XG5cbmZ1bmN0aW9uIGRyYXcoKSB7XHRcblx0bGV0IENvdW50ID0gMDtcblx0R0FNRS5jYW52YXNDb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBHQU1FLndpZHRoLCBHQU1FLmhlaWdodCk7XG5cdFxuXHRmb3IobGV0IGkgPSAwOyBpIDw9IDM5OTsgaSArKyl7XG5cdFx0aWYgKGZpZWxkW2ldID09IDApICAvL0Zvb2RDZWxsIDBcblx0XHRcdEdBTUUuY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoR0FNRS5zcHJpdGVzLkZvb2RDZWxsLCAoQ2VsbC53aWR0aCooaSUxOSkpLCAoQ2VsbC5oZWlnaHQqKE1hdGguZmxvb3IoaS8xOSkpKSwgQ2VsbC53aWR0aCwgQ2VsbC5oZWlnaHQpO1xuXHRcdGlmIChmaWVsZFtpXSA9PSAxKSAgLy9XYWxsIDFcblx0XHRcdEdBTUUuY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoR0FNRS5zcHJpdGVzLldhbGwsIChDZWxsLndpZHRoKihpJTE5KSksIChDZWxsLmhlaWdodCooTWF0aC5mbG9vcihpLzE5KSkpLCBDZWxsLndpZHRoLCBDZWxsLmhlaWdodCk7XG5cdFx0aWYgKGZpZWxkW2ldID09IDIpICAvL0VtcHR5Q2VsbCAyXG5cdFx0XHRHQU1FLmNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKEdBTUUuc3ByaXRlcy5FbXB0eUNlbGwsIChDZWxsLndpZHRoKihpJTE5KSksIChDZWxsLmhlaWdodCooTWF0aC5mbG9vcihpLzE5KSkpLCBDZWxsLndpZHRoLCBDZWxsLmhlaWdodCk7XG5cdCBcblx0XHRpZiAoZmllbGRbaV0gPT0gMyl7IC8vUGFjbWFuIDNcblx0XHRcdEdBTUUuY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoR0FNRS5zcHJpdGVzLkVtcHR5Q2VsbCwgKENlbGwud2lkdGgqKGklMTkpKSwgKENlbGwuaGVpZ2h0KihNYXRoLmZsb29yKGkvMTkpKSksIENlbGwud2lkdGgsIENlbGwuaGVpZ2h0KTtcblx0XHRcdGlmICgoUGFjbWFuLkRpcmVjdGlvbi5Ob3cgPT0gMSkgfHwgKFBhY21hbi5EaXJlY3Rpb24uTm93ID09IDApKUdBTUUuY2FudmFzQ29udGV4dC5kcmF3SW1hZ2UoR0FNRS5zcHJpdGVzLlJpZ2h0LCAoQ2VsbC53aWR0aCooaSUxOSkpLCAoQ2VsbC5oZWlnaHQqKE1hdGguZmxvb3IoaS8xOSkpKSwgQ2VsbC53aWR0aCwgQ2VsbC5oZWlnaHQpO1xuXHRcdFx0aWYgKFBhY21hbi5EaXJlY3Rpb24uTm93ID09IC0xKSBHQU1FLmNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKEdBTUUuc3ByaXRlcy5MZWZ0LCAoQ2VsbC53aWR0aCooaSUxOSkpLCAoQ2VsbC5oZWlnaHQqKE1hdGguZmxvb3IoaS8xOSkpKSwgQ2VsbC53aWR0aCwgQ2VsbC5oZWlnaHQpO1xuXHRcdFx0aWYgKFBhY21hbi5EaXJlY3Rpb24uTm93ID09IC0xOSkgR0FNRS5jYW52YXNDb250ZXh0LmRyYXdJbWFnZShHQU1FLnNwcml0ZXMuVG9wLCAoQ2VsbC53aWR0aCooaSUxOSkpLCAoQ2VsbC5oZWlnaHQqKE1hdGguZmxvb3IoaS8xOSkpKSwgQ2VsbC53aWR0aCwgQ2VsbC5oZWlnaHQpO1xuXHRcdFx0aWYgKFBhY21hbi5EaXJlY3Rpb24uTm93ID09IDE5KSBHQU1FLmNhbnZhc0NvbnRleHQuZHJhd0ltYWdlKEdBTUUuc3ByaXRlcy5Cb3R0b20sIChDZWxsLndpZHRoKihpJTE5KSksIChDZWxsLmhlaWdodCooTWF0aC5mbG9vcihpLzE5KSkpLCBDZWxsLndpZHRoLCBDZWxsLmhlaWdodCk7XG5cdFx0fVxuXHRcdGlmIChmaWVsZFtpXSA9PSA0KXsgLy9HaG9zdCA0XG5cdFx0XHRpZiAoQ291bnQgPCBHaG9zdENvdW50KXtcblx0XHRcdFx0R0FNRS5jYW52YXNDb250ZXh0LmRyYXdJbWFnZShHQU1FLnNwcml0ZXMuRm9vZENlbGwsIChDZWxsLndpZHRoKihpJTE5KSksIChDZWxsLmhlaWdodCooTWF0aC5mbG9vcihpLzE5KSkpLCBDZWxsLndpZHRoLCBDZWxsLmhlaWdodCk7ICBcblx0XHRcdFx0R0FNRS5jYW52YXNDb250ZXh0LmRyYXdJbWFnZShHQU1FLnNwcml0ZXMuR2hvc3QsIChDZWxsLndpZHRoKihpJTE5KSksIChDZWxsLmhlaWdodCooTWF0aC5mbG9vcihpLzE5KSkpLCBDZWxsLndpZHRoLCBDZWxsLmhlaWdodCk7XG5cdFx0XHR9XG5cdFx0ICAgIENvdW50Kys7XHRcdFx0XG5cdFx0fVxuXHR9XG5cdEdBTUUuY2FudmFzQ29udGV4dC5mb250ID0gXCIzMHB4IEFyaWFsXCI7ICAgXHRcblx0R0FNRS5jYW52YXNDb250ZXh0LmZpbGxTdHlsZSA9IFwicmVkXCI7ICBcblx0R0FNRS5jYW52YXNDb250ZXh0LmZpbGxUZXh0KFBhY21hbi5zY29yZSwgMTIsIDI3KTsgXG59XG5cbmZ1bmN0aW9uIFVwZGF0ZVN0YXRlKCl7XG5cdGlmIChmaWVsZFtQYWNtYW4ucG9zXSA9PSAzKXsgLy9QYWNtYW5cblx0XHRpZiAoZmllbGRbUGFjbWFuLnBvcytQYWNtYW4uRGlyZWN0aW9uLk5leHRdICE9IDEpe1xuXHRcdFx0UGFjbWFuLkRpcmVjdGlvbi5Ob3cgPSBQYWNtYW4uRGlyZWN0aW9uLk5leHQ7XHRcdCAgXHRcdFx0XHQgIFxuXHRcdH1cblx0XHRpZiAoZmllbGRbUGFjbWFuLnBvcytQYWNtYW4uRGlyZWN0aW9uLk5vd10gPT0gMClcblx0XHRcdFBhY21hbi5zY29yZSsrO1xuXHRcdGlmIChmaWVsZFtQYWNtYW4ucG9zK1BhY21hbi5EaXJlY3Rpb24uTm93XSA9PSA0KXtcblx0XHRcdGZpZWxkW1BhY21hbi5wb3NdID0gMjtcblx0XHRcdGxvc2UgPSB0cnVlO1x0XHQgIFx0XHRcdFx0ICBcblx0XHR9XG5cdFx0aWYgKChmaWVsZFtQYWNtYW4ucG9zK1BhY21hbi5EaXJlY3Rpb24uTm93XSAhPSAxKSAmJiAoIWxvc2UpKXtcblx0XHRcdGZpZWxkW1BhY21hbi5wb3NdID0gMjtcblx0XHRcdGZpZWxkW1BhY21hbi5wb3MrUGFjbWFuLkRpcmVjdGlvbi5Ob3ddID0gMztcdFxuICAgICAgICAgICAgUGFjbWFuLnBvcyA9IFBhY21hbi5wb3MgKyBQYWNtYW4uRGlyZWN0aW9uLk5vdztcdFx0XG5cdFx0fVxuXHR9IGVsc2Uge2xvc2UgPSB0cnVlO31cdFx0XHRcdCAgXG5cdFx0XG5cdGZvcihsZXQgaSA9IDA7IGkgPCBHaG9zdENvdW50OyBpKyspe1xuXHRcdGlmIChmaWVsZFtHaG9zdHNbaV0ucG9zXSA9PSA0KXsgIC8vR2hvc3RcdFx0XHRcdFx0XHRcdFxuXHRcdFx0R2hvc3RzW2ldLkNob29zZVdheXMoKTtcdFxuXHRcdFx0R2hvc3RzW2ldLlVwZGF0ZVBvc2l0aW9uKCk7XG5cdFx0XHRHaG9zdHNbaV0uRGlyZWN0aW9uID0gMDtcdFx0XHRcdCAgXHRcdFxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzS2V5KGU6IGFueSkgeyBcbiAgaWYgKGUua2V5Q29kZSA9PSAzOCkgeyAvL9CS0LLQtdGA0YVcblx0UGFjbWFuLkRpcmVjdGlvbi5OZXh0ID0gLTE5O1xuICB9XG4gIGlmIChlLmtleUNvZGUgPT0gNDApIHsgLy/QktC90LjQt1xuXHRQYWNtYW4uRGlyZWN0aW9uLk5leHQgPSAxOTtcbiAgfVxuICBpZiAoZS5rZXlDb2RlID09IDM3KSB7IC8v0JLQu9C10LLQvlxuXHRQYWNtYW4uRGlyZWN0aW9uLk5leHQgPSAtMTtcbiAgfVxuICBpZiAoZS5rZXlDb2RlID09IDM5KSB7IC8v0JLQv9GA0LDQstC+XG5cdFBhY21hbi5EaXJlY3Rpb24uTmV4dCA9IDE7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2xlZXAobWlsbGlzOiBudW1iZXIpIHtcblx0bGV0IGogPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xuXHQvL2xldCBpID0gMDtcblx0d2hpbGUgKCgobmV3IERhdGUoKSkuZ2V0VGltZSgpIC0gaikgPCBtaWxsaXMpIHtcblx0XHQvL2krKztcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRSYW5kb21JbnRJbmNsdXNpdmUobWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7XG5cdG1pbiA9IE1hdGguY2VpbChtaW4pO1xuXHRtYXggPSBNYXRoLmZsb29yKG1heCk7XG5cdHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSkpICsgbWluO1xufVxuXG4iXSwic291cmNlUm9vdCI6IiJ9